<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>Highway Racer</title>
    <style>
        body { margin: 0; overflow: hidden; background: #050505; font-family: 'Arial Black', sans-serif; }
        canvas { display: block; margin: 0 auto; background: #111; box-shadow: 0 0 150px rgba(255,0,0,0.4); }
        
        #ui { position: absolute; top: 20px; left: 50%; transform: translateX(-50%); color: white; text-align: center; pointer-events: none; width: 100%; }
        .logo-container { font-style: italic; text-transform: uppercase; line-height: 1; }
        .jp-badge { font-size: 18px; color: #fff; background: #ff0000; padding: 2px 12px; display: inline-block; transform: skewX(-15deg); margin-bottom: 5px; font-weight: bold; border: 2px solid #fff; box-shadow: 4px 4px 0px #000; }
        .main-title { font-size: 52px; color: #fff; -webkit-text-stroke: 1.5px #ff0000; text-shadow: 5px 5px 0px #000; letter-spacing: -2px; display: block; }
        .score-box { font-size: 26px; margin-top: 10px; color: #f1c40f; text-shadow: 2px 2px 4px #000; font-style: italic; }

        /* Startovací obrazovka */
        #start-screen {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8); display: flex; flex-direction: column;
            justify-content: center; align-items: center; z-index: 10;
        }
        button {
            padding: 20px 40px; font-size: 30px; font-family: 'Arial Black';
            color: white; background: #ff0000; border: 4px solid white;
            cursor: pointer; transform: skewX(-15deg); transition: 0.2s;
        }
        button:hover { background: white; color: #ff0000; }
    </style>
</head>
<body>

    <!-- Startovací tlačítko (nutné pro aktivaci hudby) -->
    <div id="start-screen">
        <div class="logo-container" style="margin-bottom: 30px;">
            <div class="jp-badge">ハイウェイ・レーサー</div>
            <span class="main-title">Highway Racer</span>
        </div>
        <button onclick="startGame()">START ENGINE</button>
    </div>

    <div id="ui">
        <div class="logo-container">
            <div class="jp-badge">ハイウェイ・レーサー</div>
            <span class="main-title">Highway Racer</span>
        </div>
        <div class="score-box">DISTANCE: <span id="score">0</span>m</div>
    </div>
    <canvas id="gameCanvas"></canvas>

    <!-- Audio element -->
    <audio id="bgMusic" loop>
        <source src="remember.mp3" type="audio/mpeg">
    </audio>

<script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");
    const scoreElement = document.getElementById("score");
    const bgMusic = document.getElementById("bgMusic");
    const startScreen = document.getElementById("start-screen");

    canvas.width = 450;
    canvas.height = window.innerHeight;

    let score = 0;
    let gameSpeed = 9;
    let isGameOver = false;
    let gameRunning = false;
    let roadAnim = 0;

    const player = { x: 195, y: canvas.height - 180, w: 60, h: 110, color: "#fdfdfd" };
    const enemies = [];
    const keys = {};

    window.addEventListener("keydown", e => keys[e.code] = true);
    window.addEventListener("keyup", e => keys[e.code] = false);

    function startGame() {
        startScreen.style.display = "none";
        gameRunning = true;
        bgMusic.play().catch(e => console.log("Hudba se nespustila:", e));
        draw();
    }

    function drawUltraCar(x, y, w, h, color, isPlayer) {
        ctx.save();
        ctx.fillStyle = "rgba(0,0,0,0.5)";
        ctx.beginPath();
        ctx.roundRect(x - 5, y + 5, w + 10, h + 5, 15);
        ctx.fill();

        const wheels = [[x-6, y+15], [x+w-6, y+15], [x-6, y+h-35], [x+w-6, y+h-35]];
        wheels.forEach(([wx, wy]) => {
            ctx.fillStyle = "#111";
            ctx.beginPath();
            ctx.roundRect(wx, wy, 12, 24, 5);
            ctx.fill();
        });

        let bodyGrad = ctx.createLinearGradient(x, y, x + w, y);
        bodyGrad.addColorStop(0, color);
        bodyGrad.addColorStop(0.5, isPlayer ? "#fff" : "rgba(255,255,255,0.3)");
        bodyGrad.addColorStop(1, color);
        
        ctx.fillStyle = bodyGrad;
        ctx.beginPath();
        ctx.roundRect(x, y, w, h, 15);
        ctx.fill();

        ctx.fillStyle = "#111";
        ctx.roundRect(x + 8, y + 25, w - 16, 45, 5); 
        ctx.fill();
        
        ctx.fillStyle = color;
        ctx.fillRect(x - 8, y + 35, 8, 12);
        ctx.fillRect(x + w, y + 35, 8, 12);

        if (isPlayer) {
            ctx.shadowBlur = 20;
            ctx.shadowColor = "#e0ffff";
            ctx.fillStyle = "#e0ffff";
            ctx.fillRect(x + 6, y - 2, 14, 8);
            ctx.fillRect(x + w - 20, y - 2, 14, 8);
        } else {
            ctx.fillStyle = "#ffcc00";
            ctx.fillRect(x + 6, y + h - 2, 14, 6);
            ctx.fillRect(x + w - 20, y + h - 2, 14, 6);
        }
        ctx.restore();
    }

    function update() {
        if (isGameOver || !gameRunning) return;
        roadAnim += gameSpeed;
        if (roadAnim > 100) roadAnim = 0;

        if (keys["ArrowLeft"] && player.x > 35) player.x -= 8.5;
        if (keys["ArrowRight"] && player.x < canvas.width - player.w - 35) player.x += 8.5;

        if (Math.random() < 0.02) {
            const colors = ["#d35400", "#2980b9", "#27ae60", "#c0392b"];
            enemies.push({ 
                x: Math.random() * (canvas.width - 140) + 70, 
                y: -150, w: 60, h: 110, 
                color: colors[Math.floor(Math.random() * colors.length)] 
            });
        }

        enemies.forEach((enemy, i) => {
            enemy.y += gameSpeed;
            if (player.x < enemy.x + enemy.w - 12 && player.x + player.w - 12 > enemy.x &&
                player.y < enemy.y + enemy.h - 15 && player.y + player.h - 15 > enemy.y) {
                isGameOver = true;
                bgMusic.pause();
                alert("NANI?! MASAKA!\nUjel jsi: " + score + " metrů");
                location.reload();
            }
            if (enemy.y > canvas.height) {
                enemies.splice(i, 1);
                score += 100;
                scoreElement.innerText = score;
                gameSpeed += 0.03;
            }
        });
    }

    function draw() {
        if (!gameRunning) return;
        ctx.fillStyle = "#151515";
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        
        ctx.fillStyle = "#333";
        ctx.fillRect(0, 0, 35, canvas.height);
        ctx.fillRect(canvas.width - 35, 0, 35, canvas.height);
        
        ctx.fillStyle = (Math.floor(roadAnim/12) % 2 == 0) ? "#eee" : "#c0392b";
        ctx.fillRect(28, 0, 7, canvas.height);
        ctx.fillRect(canvas.width - 35, 0, 7, canvas.height);

        ctx.fillStyle = "#f1c40f";
        let offset = roadAnim % 100;
        for (let i = -100; i < canvas.height; i += 100) {
            ctx.fillRect(canvas.width / 2 - 2, i + offset, 4, 50);
        }

        drawUltraCar(player.x, player.y, player.w, player.h, player.color, true);
        enemies.forEach(e => drawUltraCar(e.x, e.y, e.w, e.h, e.color, false));

        update();
        requestAnimationFrame(draw);
    }
</script>
</body>

</html>
